# Инструкции по тестированию ленточного меню

## Проблема
Ленточное меню не отображается в форме Mask Builder.

## Что уже исправлено
1. ✅ Добавлен вызов `createRibbonMenu()` в `createMaskForm()`
2. ✅ Реализован метод `createRibbonMenu()`
3. ✅ Все необходимые методы для обработки действий уже существуют
4. ✅ CSS стили для ленточного меню настроены правильно
5. ✅ Плагин пересобран

## Шаги для тестирования

### Шаг 1: Перезапуск Obsidian
1. **Полностью закройте Obsidian**
2. **Запустите Obsidian заново**
3. **Убедитесь, что плагин загружен** (Настройки → Плагины сообщества → Mask Builder)

### Шаг 2: Открытие консоли разработчика
1. **Откройте Mask Builder** (Ctrl+Shift+M)
2. **Нажмите F12** для открытия консоли разработчика
3. **Перейдите на вкладку Console**

### Шаг 3: Проверка логов
В консоли должны появиться следующие логи:

```
Начинаем инициализацию RibbonMenu
Создаем RibbonMenu с опциями: [объект с настройками]
RibbonMenu создан: [объект RibbonMenu]
RibbonMenu инициализирован: [объект RibbonMenu]
Создание ленточного меню, ribbonMenu: [объект RibbonMenu]
RibbonMenu.create вызван с container: [HTMLElement]
Создан ribbonContainer: [HTMLElement]
Создан iconsContainer: [HTMLElement]
Отсортированные действия: [массив действий]
Создаем значок для действия: format-content Форматировать содержимое edit
getIconSvg вызван с iconName: edit
Найдена SVG иконка для edit
Создан iconContainer: [HTMLElement]
SVG для иконки edit: [SVG код]
Значок действия создан успешно: format-content
...
Ленточное меню создано успешно
```

### Шаг 4: Проверка HTML элементов
В консоли выполните следующие команды:

```javascript
// Проверка загрузки плагина
console.log('Плагин загружен:', app.plugins.plugins['obsidian-mask-builder']);

// Проверка стилей
document.querySelectorAll('.mask-builder-ribbon-menu').length;

// Проверка элементов ленточного меню
document.querySelectorAll('.ribbon-action-icon').length;

// Проверка SVG иконок
document.querySelectorAll('.ribbon-icon svg').length;

// Проверка заголовка ленточного меню
document.querySelector('.ribbon-header h4')?.textContent;
```

### Шаг 5: Проверка CSS
1. **В консоли разработчика** перейдите на вкладку **Elements**
2. **Найдите элемент** с классом `mask-builder-ribbon-menu`
3. **Проверьте, применяются ли CSS стили**
4. **Убедитесь, что элемент видим** (не скрыт)

## Возможные причины проблемы

### 1. Плагин не перезапустился
- **Решение**: Полностью закройте и запустите Obsidian заново

### 2. Конфликт с другими плагинами
- **Решение**: Временно отключите другие плагины и проверьте

### 3. Проблемы с CSS
- **Решение**: Проверьте, загружается ли файл `styles.css`

### 4. JavaScript ошибки
- **Решение**: Проверьте консоль на наличие ошибок

## Диагностика

### Если логи не появляются:
- Плагин не инициализируется
- Проверьте настройки плагина

### Если логи есть, но меню не отображается:
- Проблема с CSS
- Проверьте стили и видимость элементов

### Если элементы создаются, но не видны:
- Проблема с CSS стилями
- Проверьте z-index и позиционирование

## Команды для принудительного отображения

Если ленточное меню все еще не отображается, попробуйте в консоли:

```javascript
// Принудительно показать ленточное меню
const ribbonMenu = document.querySelector('.mask-builder-ribbon-menu');
if (ribbonMenu) {
  ribbonMenu.style.display = 'block';
  ribbonMenu.style.visibility = 'visible';
  ribbonMenu.style.opacity = '1';
  console.log('Ленточное меню принудительно показано');
} else {
  console.log('Ленточное меню не найдено в DOM');
}
```

## Следующие шаги

1. **Выполните все шаги тестирования**
2. **Проверьте логи в консоли**
3. **Сообщите результаты** - какие логи появляются, какие ошибки
4. **Приложите скриншот** консоли разработчика

## Контакты для поддержки

Если проблема не решается, предоставьте:
1. Логи из консоли разработчика
2. Скриншот формы Mask Builder
3. Версию Obsidian и плагина
4. Описание ожидаемого поведения
5. Результаты выполнения команд диагностики
