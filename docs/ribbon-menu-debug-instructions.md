# Инструкции по отладке ленточного меню

## Проблема
Ленточное меню не отображается в форме Mask Builder, и иконки не показываются при выборе.

## Что добавлено для отладки

### 1. Логирование в MaskBuilderModal
- В конструкторе: `console.log('RibbonMenu инициализирован:', this.ribbonMenu);`
- В initializeRibbonMenu: логирование создания RibbonMenu
- В createPreviewSection: логирование создания ленточного меню

### 2. Логирование в RibbonMenu
- В методе create: логирование всех этапов создания
- В createActionIcon: логирование создания каждого значка
- В getIconSvg: логирование поиска иконок

## Шаги для отладки

### Шаг 1: Перезапуск Obsidian
1. Закройте Obsidian полностью
2. Запустите Obsidian заново
3. Убедитесь, что плагин загружен (проверьте в настройках плагинов)

### Шаг 2: Открытие консоли разработчика
1. Откройте Mask Builder (Ctrl+Shift+M)
2. Нажмите F12 для открытия консоли разработчика
3. Перейдите на вкладку Console

### Шаг 3: Проверка логов
В консоли должны появиться следующие логи:

```
Начинаем инициализацию RibbonMenu
Создаем RibbonMenu с опциями: [объект с настройками]
RibbonMenu создан: [объект RibbonMenu]
RibbonMenu инициализирован: [объект RibbonMenu]
Создание ленточного меню, ribbonMenu: [объект RibbonMenu]
RibbonMenu.create вызван с container: [HTMLElement]
Создан ribbonContainer: [HTMLElement]
Создан iconsContainer: [HTMLElement]
Отсортированные действия: [массив действий]
Создаем значок для действия: format-content Форматировать содержимое edit
getIconSvg вызван с iconName: edit
Найдена SVG иконка для edit
Создан iconContainer: [HTMLElement]
SVG для иконки edit: [SVG код]
Значок действия создан успешно: format-content
...
Ленточное меню создано успешно
```

### Шаг 4: Анализ проблем

#### Если ленточное меню не создается:
- Проверьте, вызывается ли `initializeRibbonMenu()` в конструкторе
- Проверьте, создается ли объект RibbonMenu
- Проверьте, вызывается ли `createPreviewSection()`

#### Если иконки не отображаются:
- Проверьте, вызывается ли `getIconSvg()`
- Проверьте, возвращает ли метод правильный SVG код
- Проверьте, устанавливается ли `innerHTML` для элементов иконок

#### Если CSS не применяется:
- Проверьте, загружен ли файл `styles.css`
- Проверьте, применяются ли классы CSS к элементам
- Проверьте, нет ли конфликтов с другими стилями

## Возможные причины проблемы

### 1. Проблемы с инициализацией
- RibbonMenu не создается в конструкторе
- Метод create не вызывается
- Контейнер не передается правильно

### 2. Проблемы с иконками
- SVG код не генерируется
- innerHTML не устанавливается
- CSS стили не применяются

### 3. Проблемы с CSS
- Файл стилей не загружается
- Классы CSS не применяются
- Конфликты с другими стилями

## Команды для проверки

### В консоли браузера:
```javascript
// Проверка загрузки плагина
console.log('Плагин загружен:', app.plugins.plugins['obsidian-mask-builder']);

// Проверка стилей
document.querySelectorAll('.mask-builder-ribbon-menu').length;

// Проверка элементов ленточного меню
document.querySelectorAll('.ribbon-action-icon').length;

// Проверка SVG иконок
document.querySelectorAll('.ribbon-icon svg').length;
```

### В настройках Obsidian:
1. Настройки → Плагины сообщества
2. Найдите "Mask Builder"
3. Убедитесь, что плагин включен
4. Проверьте версию плагина

## Следующие шаги после отладки

1. **Если ленточное меню отображается**: Проверьте работу всех кнопок
2. **Если иконки не отображаются**: Проверьте генерацию SVG и CSS стили
3. **Если CSS не применяется**: Проверьте загрузку файла стилей
4. **Если ничего не работает**: Проверьте логи на наличие ошибок

## Контакты для поддержки

Если проблема не решается, предоставьте:
1. Логи из консоли разработчика
2. Скриншот формы Mask Builder
3. Версию Obsidian и плагина
4. Описание ожидаемого поведения
