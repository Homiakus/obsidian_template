# Тесты и критерии приёмки

## Легенда статусов
- **PASS** - Тест пройден успешно
- **FAIL** - Тест не пройден
- **BLOCKED** - Тест заблокирован зависимостями
- **NOT_RUN** - Тест ещё не выполнялся

## Базовые тесты производительности

| ID | Проверка | Тип | Ожидаемо | Фактически | Статус | Владелец |
|----|----------|-----|----------|------------|--------|----------|
| T1 | Время открытия MOC | Производительность | < 1.5с | - | NOT_RUN | QA Lead |
| T2 | Время глобального поиска | Производительность | < 0.8с | - | NOT_RUN | QA Lead |
| T3 | Время загрузки vault | Производительность | < 3с | - | NOT_RUN | QA Lead |
| T4 | Использование памяти | Ресурсы | < 100MB | - | NOT_RUN | QA Lead |
| T5 | Время отклика плагинов | Производительность | < 100мс | - | NOT_RUN | QA Lead |

## Тесты связности и навигации

| ID | Проверка | Тип | Ожидаемо | Фактически | Статус | Владелец |
|----|----------|-----|----------|------------|--------|----------|
| T6 | Процент сирот | Связность | < 20% | - | NOT_RUN | Knowledge Architect |
| T7 | Средняя степень узла | Граф | > 2.0 | - | NOT_RUN | Knowledge Architect |
| T8 | Время до ответа (топ-10) | Навигация | ≤ 3 клика | - | NOT_RUN | Knowledge Architect |
| T9 | Покрытие MOC | Навигация | > 80% заметок | - | NOT_RUN | Knowledge Architect |
| T10 | Работоспособность алиасов | Связность | 100% работают | - | NOT_RUN | Knowledge Architect |

## Тесты качества метаданных

| ID | Проверка | Тип | Ожидаемо | Фактически | Статус | Владелец |
|----|----------|-----|----------|------------|--------|----------|
| T11 | SHACL валидация | Схемы | 95% pass | - | NOT_RUN | Ontology Engineer |
| T12 | Единообразие frontmatter | Структура | > 90% соответствие | - | NOT_RUN | Ontology Engineer |
| T13 | Заполненность обязательных полей | Качество | > 95% | - | NOT_RUN | Ontology Engineer |
| T14 | Корректность UID | Уникальность | 100% уникальность | - | NOT_RUN | Ontology Engineer |
| T15 | Валидность JSON Schema | Схемы | 100% валидность | - | NOT_RUN | Ontology Engineer |

## Тесты документации

| ID | Проверка | Тип | Ожидаемо | Фактически | Статус | Владелец |
|----|----------|-----|----------|------------|--------|----------|
| T16 | Покрытие Diátaxis | Структура | 100% для ключевых тем | - | NOT_RUN | Docs Lead |
| T17 | Читаемость документации | Качество | > 80% по Flesch | - | NOT_RUN | Docs Lead |
| T18 | Свежесть страниц | Актуальность | < 90 дней | - | NOT_RUN | Docs Lead |
| T19 | Кросс-ссылки | Навигация | > 70% работают | - | NOT_RUN | Docs Lead |
| T20 | Глоссарий терминов | Полнота | > 80% покрытие | - | NOT_RUN | Docs Lead |

## Тесты совместимости

| ID | Проверка | Тип | Ожидаемо | Фактически | Статус | Владелец |
|----|----------|-----|----------|------------|--------|----------|
| T21 | Совместимость плагинов | Интеграция | 100% работают | - | NOT_RUN | JS/TS Developer |
| T22 | Обратная совместимость | Совместимость | 100% сохранена | - | NOT_RUN | JS/TS Developer |
| T23 | Работа существующих шаблонов | Функциональность | 100% работают | - | NOT_RUN | JS/TS Developer |
| T24 | Экспорт/импорт данных | Совместимость | 100% успешно | - | NOT_RUN | JS/TS Developer |
| T25 | Работа с существующими данными | Целостность | 100% сохранена | - | NOT_RUN | JS/TS Developer |

## Автоматизированные тесты

### Dataview тесты
```dataview
// Тест T6: Подсчёт сирот
TABLE length(file.inlinks) AS Inlinks
FROM ""
WHERE length(file.inlinks) = 0 AND !contains(file.path, "/docspro/")
```

### SHACL тесты
```json
{
  "sh:targetClass": "Note",
  "sh:property": [
    {
      "sh:path": "frontmatter.id",
      "sh:minCount": 1,
      "sh:pattern": "^[a-zA-Z0-9_-]+$"
    }
  ]
}
```

### Производительность тесты
```javascript
// Тест T1: Время открытия MOC
const startTime = performance.now();
// Открытие MOC
const endTime = performance.now();
const duration = endTime - startTime;
console.log(`MOC открыт за ${duration}мс`);
```

## Критерии приёмки

### Критерий 1: Производительность
- **T1-T5**: Все тесты производительности должны пройти (PASS)
- **Допустимые отклонения**: ±10% от целевых значений
- **Критический порог**: MOC > 2.5с, поиск > 1.2с

### Критерий 2: Качество данных
- **T11-T15**: SHACL валидация ≥ 95%, остальные ≥ 90%
- **Допустимые отклонения**: ±5% от целевых значений
- **Критический порог**: SHACL < 90%, frontmatter < 80%

### Критерий 3: Связность
- **T6-T10**: Процент сирот < 25%, навигация ≤ 4 клика
- **Допустимые отклонения**: ±15% от целевых значений
- **Критический порог**: Сироты > 35%, навигация > 5 кликов

### Критерий 4: Документация
- **T16-T20**: Diátaxis 100%, остальные ≥ 80%
- **Допустимые отклонения**: ±10% от целевых значений
- **Критический порог**: Diátaxis < 90%, читаемость < 70%

### Критерий 5: Совместимость
- **T21-T25**: Все тесты должны пройти (PASS)
- **Допустимые отклонения**: 0% (критично)
- **Критический порог**: Любой тест FAIL

## План тестирования

### Фаза 1: Базовое тестирование (дни 1-2)
- Выполнение тестов T1-T5 (производительность)
- Выполнение тестов T6-T10 (связность)
- Сбор базовых метрик

### Фаза 2: Углублённое тестирование (дни 3-4)
- Выполнение тестов T11-T15 (метаданные)
- Выполнение тестов T16-T20 (документация)
- Анализ результатов

### Фаза 3: Интеграционное тестирование (дни 5-6)
- Выполнение тестов T21-T25 (совместимость)
- End-to-end тестирование
- Валидация критериев приёмки

### Фаза 4: Отчёт и рекомендации (день 7)
- Анализ всех результатов
- Формирование отчёта
- Планирование корректирующих действий

## Метрики качества

### Общий показатель качества
```
Общий показатель = (Количество PASS тестов / Общее количество тестов) × 100%
```

### Показатели по категориям
- **Производительность**: (PASS из T1-T5) / 5 × 100%
- **Связность**: (PASS из T6-T10) / 5 × 100%
- **Метаданные**: (PASS из T11-T15) / 5 × 100%
- **Документация**: (PASS из T16-T20) / 5 × 100%
- **Совместимость**: (PASS из T21-T25) / 5 × 100%

---
*Создано: {{date}}*
*Владелец: QA Lead*
*Статус: Активен*

